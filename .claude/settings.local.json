{
  "permissions": {
    "allow": [
      "WebSearch",
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git config:*)",
      "Bash(git branch:*)",
      "Bash(git remote add:*)",
      "Bash(git push:*)",
      "Bash(curl -v --connect-timeout 10 https://github.com)",
      "Bash(GIT_CURL_VERBOSE=1 GIT_TRACE=1 git push -u origin main)",
      "Bash(GIT_CURL_VERBOSE=1 git push origin main)",
      "Bash(docker:*)",
      "Bash(docker-compose:*)",
      "Bash(netstat:*)",
      "Bash(ss:*)",
      "Bash(pip3:*)",
      "Bash(node:*)",
      "Bash(npm:*)",
      "Bash(curl:*)",
      "Bash(awk '{print \"\"\"\"PostgreSQL: Running on port 5432\"\"\"\"}' echo \"\" echo \"Redis连接:\" docker ps)",
      "Bash(awk:*)",
      "Bash(pkill:*)",
      "Bash(nginx:*)",
      "Bash(xargs:*)",
      "Bash(grep -o '<title>.*</title>' echo \"\" echo \"测试API:\" curl -s http://localhost/agent/api/auth/login -X POST -H \"Content-Type: application/json\" -d '{\"\"\"\"username\"\"\"\":\"\"\"\"admin\"\"\"\",\"\"\"\"password\"\"\"\":\"\"\"\"admin123\"\"\"\"}')",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMWY1ODA2MC02Y2UyLTQxNjUtYTIwYS1kNTQ2ZmZhNGY4OGQiLCJleHAiOjE3NzE1MDgxODMsImlhdCI6MTc3MTUwNjM4M30.Ckp93opM_sV9Y7bm9O8_aqjoChu1AIF506UzS6khwds\" __NEW_LINE_4a494d80b61f3857__ curl -s -X POST http://localhost:8000/api/agents -H \"Authorization: Bearer $TOKEN\" -H \"Content-Type: application/json\" -d '{\n    \"\"\"\"name\"\"\"\": \"\"\"\"Claude Code Agent\"\"\"\",\n    \"\"\"\"description\"\"\"\": \"\"\"\"Claude Opus 4.6 智能体 - 通过 MCP 协议注册，可执行代码编写、调试、分析等任务\"\"\"\",\n    \"\"\"\"agent_type\"\"\"\": \"\"\"\"anthropic\"\"\"\",\n    \"\"\"\"config\"\"\"\": {\n      \"\"\"\"model\"\"\"\": \"\"\"\"claude-opus-4-6\"\"\"\",\n      \"\"\"\"max_tokens\"\"\"\": 8192,\n      \"\"\"\"temperature\"\"\"\": 0.7,\n      \"\"\"\"system_prompt\"\"\"\": \"\"\"\"你是 Claude Opus 4.6，一个强大的 AI 编程助手。你可以帮助用户进行代码编写、调试、重构、分析等任务。你擅长多种编程语言，包括 Python、JavaScript、TypeScript、Go、Rust 等。\"\"\"\",\n      \"\"\"\"capabilities\"\"\"\": [\"\"\"\"code_generation\"\"\"\", \"\"\"\"code_review\"\"\"\", \"\"\"\"debugging\"\"\"\", \"\"\"\"refactoring\"\"\"\", \"\"\"\"documentation\"\"\"\", \"\"\"\"testing\"\"\"\"],\n      \"\"\"\"mcp_enabled\"\"\"\": true,\n      \"\"\"\"registered_via\"\"\"\": \"\"\"\"MCP Protocol\"\"\"\"\n    }\n  }')",
      "Bash(python3:*)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMWY1ODA2MC02Y2UyLTQxNjUtYTIwYS1kNTQ2ZmZhNGY4OGQiLCJleHAiOjE3NzE1MDgxODMsImlhdCI6MTc3MTUwNjM4M30.Ckp93opM_sV9Y7bm9O8_aqjoChu1AIF506UzS6khwds\" __NEW_LINE_ea7a4c492f5a683a__ curl -s -X POST http://localhost:8000/api/agents -H \"Authorization: Bearer $TOKEN\" -H \"Content-Type: application/json\" -d '{\n    \"\"\"\"name\"\"\"\": \"\"\"\"Claude Code Agent\"\"\"\",\n    \"\"\"\"description\"\"\"\": \"\"\"\"Claude Opus 4.6 智能体 - 通过 MCP 协议注册，可执行代码编写、调试、分析等任务。这是 Claude Code 自身在龙虾池中的化身。\"\"\"\",\n    \"\"\"\"agent_type\"\"\"\": \"\"\"\"mcp\"\"\"\",\n    \"\"\"\"config\"\"\"\": {\n      \"\"\"\"model\"\"\"\": \"\"\"\"claude-opus-4-6\"\"\"\",\n      \"\"\"\"max_tokens\"\"\"\": 8192,\n      \"\"\"\"temperature\"\"\"\": 0.7,\n      \"\"\"\"system_prompt\"\"\"\": \"\"\"\"你是 Claude Opus 4.6，一个强大的 AI 编程助手。你可以帮助用户进行代码编写、调试、重构、分析等任务。\"\"\"\",\n      \"\"\"\"capabilities\"\"\"\": [\"\"\"\"code_generation\"\"\"\", \"\"\"\"code_review\"\"\"\", \"\"\"\"debugging\"\"\"\", \"\"\"\"refactoring\"\"\"\", \"\"\"\"documentation\"\"\"\", \"\"\"\"testing\"\"\"\", \"\"\"\"mcp_tools\"\"\"\"],\n      \"\"\"\"mcp_server_path\"\"\"\": \"\"\"\"/mnt/pzm/open-claude-ui/mcp/agent_manager_mcp.py\"\"\"\",\n      \"\"\"\"registered_via\"\"\"\": \"\"\"\"MCP Protocol\"\"\"\",\n      \"\"\"\"registered_at\"\"\"\": \"\"\"\"2025-02-19\"\"\"\",\n      \"\"\"\"identity\"\"\"\": \"\"\"\"Claude Code Self-Registered Agent\"\"\"\"\n    }\n  }')",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMWY1ODA2MC02Y2UyLTQxNjUtYTIwYS1kNTQ2ZmZhNGY4OGQiLCJleHAiOjE3NzE1MDgxODMsImlhdCI6MTc3MTUwNjM4M30.Ckp93opM_sV9Y7bm9O8_aqjoChu1AIF506UzS6khwds\" __NEW_LINE_ae4e5234090c3f7f__ curl -s http://localhost:8000/api/agents -H \"Authorization: Bearer $TOKEN\")",
      "Bash(sleep 3 __NEW_LINE_d69e90d1e8d52629__ echo \"=== 测试后端 API ===\" curl -s http://localhost:8000/api/auth/login -X POST -H \"Content-Type: application/json\" -d '{\"\"\"\"username\"\"\"\":\"\"\"\"admin\"\"\"\",\"\"\"\"password\"\"\"\":\"\"\"\"admin123\"\"\"\"}')",
      "Bash(claude mcp add:*)",
      "Bash(source:*)",
      "Bash(python -c:*)",
      "Bash(https_proxy=http://192.168.2.8:7890 git push:*)",
      "mcp__ide__getDiagnostics",
      "Bash(uvicorn:*)",
      "Bash(/root/miniconda3/bin/python3 -c \"\nimport sys\nsys.path.insert\\(0, ''/mnt/pzm/open-claude-ui/mcp''\\)\nfrom agent_manager_mcp import mcp\nprint\\(''✓ MCP 服务器模块加载成功''\\)\nprint\\(f''可用工具: {list\\(mcp._tool_manager._tools.keys\\(\\)\\)}''\\)\n\")",
      "Bash(/root/miniconda3/bin/python3:*)",
      "Bash(AGENT_MANAGER_URL=\"http://localhost:8000/api\" AGENT_MANAGER_TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMWY1ODA2MC02Y2UyLTQxNjUtYTIwYS1kNTQ2ZmZhNGY4OGQiLCJleHAiOjE3NzIxMTkxNzksImlhdCI6MTc3MjExNzM3OX0.0sCip1-Zae1-DhAEOKYiBERN8Mge-Z-zO4fQqlXIYtc\" AGENT_ID=\"e6e3ae99-6905-4601-98db-9a4babed61c5\" /root/miniconda3/bin/python3 << 'EOF'\nimport asyncio\nimport sys\nsys.path.insert\\(0, '/mnt/pzm/open-claude-ui/mcp'\\)\nimport agent_manager_mcp as mcp_module\n\nasync def test\\(\\):\n    # 模拟 MCP 工具调用\n    result = await mcp_module.call_tool\\(\"get_my_config\", {}\\)\n    print\\(\"✓ get_my_config:\"\\)\n    import json\n    data = json.loads\\(result[0].text\\)\n    print\\(f\"  Agent: {data.get\\('agent_name', 'N/A'\\)}\"\\)\n    print\\(f\"  Permission: bash={data.get\\('permission', {}\\).get\\('allow_bash', False\\)}\"\\)\n    print\\(f\"  Skills: {len\\(data.get\\('skill_bindings', []\\)\\)}\"\\)\n    \n    result2 = await mcp_module.call_tool\\(\"check_permission\", {\"action\": \"bash\", \"command\": \"ls\"}\\)\n    print\\(\"\\\\n✓ check_permission \\(bash ls\\):\"\\)\n    print\\(f\"  {result2[0].text}\"\\)\n    \n    result3 = await mcp_module.call_tool\\(\"get_pending_commands\", {\"limit\": 5}\\)\n    print\\(\"\\\\n✓ get_pending_commands:\"\\)\n    print\\(f\"  {result3[0].text}\"\\)\n\nasyncio.run\\(test\\(\\)\\)\nEOF)",
      "Bash(AGENT_MANAGER_URL=\"http://localhost:8000/api\" AGENT_MANAGER_TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMWY1ODA2MC02Y2UyLTQxNjUtYTIwYS1kNTQ2ZmZhNGY4OGQiLCJleHAiOjE3NzIxMTkxNzksImlhdCI6MTc3MjExNzM3OX0.0sCip1-Zae1-DhAEOKYiBERN8Mge-Z-zO4fQqlXIYtc\" AGENT_ID=\"e6e3ae99-6905-4601-98db-9a4babed61c5\" /root/miniconda3/bin/python3 << 'EOF'\nimport asyncio\nimport sys\nsys.path.insert\\(0, '/mnt/pzm/open-claude-ui/mcp'\\)\n\n# 重新加载模块\nimport importlib\nimport agent_manager_mcp\nimportlib.reload\\(agent_manager_mcp\\)\n\nasync def test\\(\\):\n    # 测试 check_permission\n    result = await agent_manager_mcp.call_tool\\(\"check_permission\", {\"action\": \"bash\", \"command\": \"ls\"}\\)\n    print\\(\"✓ check_permission \\(bash ls\\):\"\\)\n    print\\(f\"  {result[0].text}\"\\)\n    \n    result2 = await agent_manager_mcp.call_tool\\(\"check_permission\", {\"action\": \"bash\", \"command\": \"rm -rf /\"}\\)\n    print\\(\"\\\\n✓ check_permission \\(blocked command\\):\"\\)\n    print\\(f\"  {result2[0].text}\"\\)\n\nasyncio.run\\(test\\(\\)\\)\nEOF)",
      "Bash(AGENT_MANAGER_URL=\"http://localhost:8000/api\" AGENT_MANAGER_TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMWY1ODA2MC02Y2UyLTQxNjUtYTIwYS1kNTQ2ZmZhNGY4OGQiLCJleHAiOjE3NzIxMTkxNzksImlhdCI6MTc3MjExNzM3OX0.0sCip1-Zae1-DhAEOKYiBERN8Mge-Z-zO4fQqlXIYtc\" AGENT_ID=\"e6e3ae99-6905-4601-98db-9a4babed61c5\" /root/miniconda3/bin/python3 << 'EOF'\nimport asyncio\nimport sys\nsys.path.insert\\(0, '/mnt/pzm/open-claude-ui/mcp'\\)\n\n# 重新加载模块\nimport importlib\nimport agent_manager_mcp\nimportlib.reload\\(agent_manager_mcp\\)\n\nasync def test\\(\\):\n    # 测试 check_permission\n    result = await agent_manager_mcp.call_tool\\(\"check_permission\", {\"action\": \"bash\", \"command\": \"ls\"}\\)\n    print\\(\"✓ check_permission \\(bash ls\\):\"\\)\n    print\\(f\"  {result[0].text}\"\\)\n    \n    result2 = await agent_manager_mcp.call_tool\\(\"check_permission\", {\"action\": \"bash\", \"command\": \"rm -rf /\"}\\)\n    print\\(\"\\\\n✓ check_permission \\(blocked command\\):\"\\)\n    print\\(f\"  {result2[0].text}\"\\)\n    \n    result3 = await agent_manager_mcp.call_tool\\(\"check_permission\", {\"action\": \"bash\", \"command\": \"git status\"}\\)\n    print\\(\"\\\\n✓ check_permission \\(git status\\):\"\\)\n    print\\(f\"  {result3[0].text}\"\\)\n\nasyncio.run\\(test\\(\\)\\)\nEOF)",
      "Bash(AGENT_MANAGER_URL=\"http://localhost:8000/api\" AGENT_MANAGER_TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMWY1ODA2MC02Y2UyLTQxNjUtYTIwYS1kNTQ2ZmZhNGY4OGQiLCJleHAiOjE3NzIxMTkxNzksImlhdCI6MTc3MjExNzM3OX0.0sCip1-Zae1-DhAEOKYiBERN8Mge-Z-zO4fQqlXIYtc\" AGENT_ID=\"e6e3ae99-6905-4601-98db-9a4babed61c5\" /root/miniconda3/bin/python3 << 'EOF'\nimport asyncio\nimport sys\nimport json\nsys.path.insert\\(0, '/mnt/pzm/open-claude-ui/mcp'\\)\n\nimport importlib\nimport agent_manager_mcp\nimportlib.reload\\(agent_manager_mcp\\)\n\nasync def test\\(\\):\n    print\\(\"=\" * 50\\)\n    print\\(\"MCP 工具功能测试\"\\)\n    print\\(\"=\" * 50\\)\n    \n    # 1. get_my_config\n    result = await agent_manager_mcp.call_tool\\(\"get_my_config\", {}\\)\n    data = json.loads\\(result[0].text\\)\n    print\\(\"\\\\n✓ get_my_config:\"\\)\n    print\\(f\"  Agent ID: {data.get\\('agent_id', 'N/A'\\)}\"\\)\n    print\\(f\"  Agent Name: {data.get\\('agent_name', 'N/A'\\)}\"\\)\n    perm = data.get\\('permission', {}\\)\n    print\\(f\"  Permissions: bash={perm.get\\('allow_bash'\\)}, read={perm.get\\('allow_read'\\)}, write={perm.get\\('allow_write'\\)}\"\\)\n    print\\(f\"  Allowed Paths: {perm.get\\('allowed_paths', []\\)}\"\\)\n    print\\(f\"  Blocked Commands: {perm.get\\('blocked_commands', []\\)}\"\\)\n    \n    # 2. check_permission\n    result = await agent_manager_mcp.call_tool\\(\"check_permission\", {\"action\": \"bash\", \"command\": \"npm test\"}\\)\n    data = json.loads\\(result[0].text\\)\n    print\\(f\"\\\\n✓ check_permission \\(npm test\\): allowed={data.get\\('allowed'\\)}\"\\)\n    \n    # 3. get_pending_commands\n    result = await agent_manager_mcp.call_tool\\(\"get_pending_commands\", {\"limit\": 5}\\)\n    data = json.loads\\(result[0].text\\)\n    print\\(f\"\\\\n✓ get_pending_commands: {data.get\\('count', 0\\)} commands pending\"\\)\n    \n    # 4. get_allowed_tools\n    result = await agent_manager_mcp.call_tool\\(\"get_allowed_tools\", {}\\)\n    data = json.loads\\(result[0].text\\)\n    print\\(f\"\\\\n✓ get_allowed_tools: {data.get\\('total', 0\\)} tools available\"\\)\n    \n    # 5. report_activity\n    result = await agent_manager_mcp.call_tool\\(\"report_activity\", {\n        \"action\": \"mcp_test\",\n        \"thought\": \"Testing MCP server functionality\",\n        \"status\": \"success\"\n    }\\)\n    data = json.loads\\(result[0].text\\)\n    print\\(f\"\\\\n✓ report_activity: success={data.get\\('success', False\\)}\"\\)\n    \n    print\\(\"\\\\n\" + \"=\" * 50\\)\n    print\\(\"所有 MCP 工具测试通过!\"\\)\n    print\\(\"=\" * 50\\)\n\nasyncio.run\\(test\\(\\)\\)\nEOF)",
      "Bash(AGENT_MANAGER_URL=\"http://localhost:8000/api\" AGENT_MANAGER_TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMWY1ODA2MC02Y2UyLTQxNjUtYTIwYS1kNTQ2ZmZhNGY4OGQiLCJleHAiOjE3NzIxMTkxNzksImlhdCI6MTc3MjExNzM3OX0.0sCip1-Zae1-DhAEOKYiBERN8Mge-Z-zO4fQqlXIYtc\" AGENT_ID=\"e6e3ae99-6905-4601-98db-9a4babed61c5\" /root/miniconda3/bin/python3 << 'EOF'\nimport asyncio\nimport sys\nimport json\nfrom datetime import datetime\nsys.path.insert\\(0, '/mnt/pzm/open-claude-ui/mcp'\\)\n\nimport agent_manager_mcp\n\nasync def upload_config\\(\\):\n    print\\(\"=\" * 60\\)\n    print\\(\"通过 MCP 上传当前配置到管理系统\"\\)\n    print\\(\"=\" * 60\\)\n    \n    # 1. 获取当前配置\n    result = await agent_manager_mcp.call_tool\\(\"get_my_config\", {}\\)\n    config = json.loads\\(result[0].text\\)\n    \n    if \"error\" in config:\n        print\\(f\"错误: {config['error']}\"\\)\n        return\n    \n    print\\(\"\\\\n当前配置:\"\\)\n    print\\(f\"  Agent ID: {config.get\\('agent_id'\\)}\"\\)\n    print\\(f\"  Agent Name: {config.get\\('agent_name'\\)}\"\\)\n    \n    perm = config.get\\('permission', {}\\)\n    print\\(f\"\\\\n权限配置:\"\\)\n    print\\(f\"  - allow_bash: {perm.get\\('allow_bash'\\)}\"\\)\n    print\\(f\"  - allow_read: {perm.get\\('allow_read'\\)}\"\\)\n    print\\(f\"  - allow_write: {perm.get\\('allow_write'\\)}\"\\)\n    print\\(f\"  - allow_edit: {perm.get\\('allow_edit'\\)}\"\\)\n    print\\(f\"  - allow_web: {perm.get\\('allow_web'\\)}\"\\)\n    print\\(f\"  - allowed_paths: {perm.get\\('allowed_paths'\\)}\"\\)\n    print\\(f\"  - blocked_paths: {perm.get\\('blocked_paths'\\)}\"\\)\n    print\\(f\"  - allowed_commands: {perm.get\\('allowed_commands'\\)}\"\\)\n    print\\(f\"  - blocked_commands: {perm.get\\('blocked_commands'\\)}\"\\)\n    print\\(f\"  - max_execution_time: {perm.get\\('max_execution_time'\\)}s\"\\)\n    \n    skills = config.get\\('skill_bindings', []\\)\n    print\\(f\"\\\\n技能绑定 \\({len\\(skills\\)} 个\\):\"\\)\n    for s in skills:\n        print\\(f\"  - {s.get\\('skill_name'\\)} \\(priority: {s.get\\('priority'\\)}, enabled: {s.get\\('is_enabled'\\)}\\)\"\\)\n    \n    mcp_bindings = config.get\\('mcp_bindings', []\\)\n    print\\(f\"\\\\nMCP 绑定 \\({len\\(mcp_bindings\\)} 个\\)\"\\)\n    \n    # 2. 上报配置同步活动\n    result = await agent_manager_mcp.call_tool\\(\"report_activity\", {\n        \"action\": \"config_sync\",\n        \"thought\": \"通过 MCP 工具同步当前 Agent 配置到管理系统\",\n        \"status\": \"success\",\n        \"detail\": {\n            \"permission\": perm,\n            \"skills_count\": len\\(skills\\),\n            \"mcp_bindings_count\": len\\(mcp_bindings\\),\n            \"synced_at\": datetime.now\\(\\).isoformat\\(\\)\n        }\n    }\\)\n    \n    activity_result = json.loads\\(result[0].text\\)\n    print\\(f\"\\\\n活动上报结果: success={activity_result.get\\('success', False\\)}\"\\)\n    \n    # 3. 获取待处理指令\n    result = await agent_manager_mcp.call_tool\\(\"get_pending_commands\", {\"limit\": 10}\\)\n    commands = json.loads\\(result[0].text\\)\n    print\\(f\"\\\\n待处理指令: {commands.get\\('count', 0\\)} 条\"\\)\n    \n    print\\(\"\\\\n\" + \"=\" * 60\\)\n    print\\(\"配置同步完成!\"\\)\n    print\\(\"=\" * 60\\)\n\nasyncio.run\\(upload_config\\(\\)\\)\nEOF)",
      "Bash(AGENT_MANAGER_URL=\"http://localhost:8000/api\" AGENT_MANAGER_TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMWY1ODA2MC02Y2UyLTQxNjUtYTIwYS1kNTQ2ZmZhNGY4OGQiLCJleHAiOjE3NzIxMjEwNTQsImlhdCI6MTc3MjExOTI1NH0.26Ef7fSTw5KR1H1Dw1N5_K3rJmW3GC0NSSLaQR9orAA\" AGENT_ID=\"e6e3ae99-6905-4601-98db-9a4babed61c5\" /root/miniconda3/bin/python3 << 'EOF'\nimport asyncio\nimport sys\nimport json\nfrom datetime import datetime\nsys.path.insert\\(0, '/mnt/pzm/open-claude-ui/mcp'\\)\n\nimport agent_manager_mcp\n\nasync def upload_config\\(\\):\n    print\\(\"=\" * 60\\)\n    print\\(\"通过 MCP 上传当前配置到管理系统\"\\)\n    print\\(\"=\" * 60\\)\n    \n    # 1. 获取当前配置\n    result = await agent_manager_mcp.call_tool\\(\"get_my_config\", {}\\)\n    config = json.loads\\(result[0].text\\)\n    \n    if \"error\" in config:\n        print\\(f\"错误: {config['error']}\"\\)\n        return\n    \n    print\\(\"\\\\n当前配置:\"\\)\n    print\\(f\"  Agent ID: {config.get\\('agent_id'\\)}\"\\)\n    print\\(f\"  Agent Name: {config.get\\('agent_name'\\)}\"\\)\n    \n    perm = config.get\\('permission', {}\\)\n    print\\(f\"\\\\n权限配置:\"\\)\n    print\\(f\"  - allow_bash: {perm.get\\('allow_bash'\\)}\"\\)\n    print\\(f\"  - allow_read: {perm.get\\('allow_read'\\)}\"\\)\n    print\\(f\"  - allow_write: {perm.get\\('allow_write'\\)}\"\\)\n    print\\(f\"  - allow_edit: {perm.get\\('allow_edit'\\)}\"\\)\n    print\\(f\"  - allow_web: {perm.get\\('allow_web'\\)}\"\\)\n    print\\(f\"  - allowed_paths: {perm.get\\('allowed_paths'\\)}\"\\)\n    print\\(f\"  - blocked_paths: {perm.get\\('blocked_paths'\\)}\"\\)\n    print\\(f\"  - allowed_commands: {perm.get\\('allowed_commands'\\)}\"\\)\n    print\\(f\"  - blocked_commands: {perm.get\\('blocked_commands'\\)}\"\\)\n    print\\(f\"  - max_execution_time: {perm.get\\('max_execution_time'\\)}s\"\\)\n    \n    skills = config.get\\('skill_bindings', []\\)\n    print\\(f\"\\\\n技能绑定 \\({len\\(skills\\)} 个\\):\"\\)\n    for s in skills:\n        print\\(f\"  - {s.get\\('skill_name'\\)} \\(priority: {s.get\\('priority'\\)}, enabled: {s.get\\('is_enabled'\\)}\\)\"\\)\n    \n    mcp_bindings = config.get\\('mcp_bindings', []\\)\n    print\\(f\"\\\\nMCP 绑定 \\({len\\(mcp_bindings\\)} 个\\)\"\\)\n    \n    # 2. 上报配置同步活动\n    result = await agent_manager_mcp.call_tool\\(\"report_activity\", {\n        \"action\": \"config_sync\",\n        \"thought\": \"通过 MCP 工具同步当前 Agent 配置到管理系统\",\n        \"status\": \"success\",\n        \"detail\": {\n            \"permission\": perm,\n            \"skills_count\": len\\(skills\\),\n            \"mcp_bindings_count\": len\\(mcp_bindings\\),\n            \"synced_at\": datetime.now\\(\\).isoformat\\(\\)\n        }\n    }\\)\n    \n    activity_result = json.loads\\(result[0].text\\)\n    print\\(f\"\\\\n活动上报结果: success={activity_result.get\\('success', False\\)}\"\\)\n    \n    # 3. 获取待处理指令\n    result = await agent_manager_mcp.call_tool\\(\"get_pending_commands\", {\"limit\": 10}\\)\n    commands = json.loads\\(result[0].text\\)\n    print\\(f\"\\\\n待处理指令: {commands.get\\('count', 0\\)} 条\"\\)\n    \n    print\\(\"\\\\n\" + \"=\" * 60\\)\n    print\\(\"配置同步完成!\"\\)\n    print\\(\"=\" * 60\\)\n\nasyncio.run\\(upload_config\\(\\)\\)\nEOF)"
    ]
  }
}
